# see randomizer/treasures.go for an explanation of what this is.

common:
  # returns a treasure interaction's collect mode in a, based on its index, or
  # returning its default if it isn't an indexed item (i.e. not randomized).
  # this also sets the item's destination player number.
  # returns nz if the mode was looked up.
  00/lookupCollectMode: |
      push bc
      push de
      push hl
      ld e,06
      ld hl,lookupCollectMode_body
      call interBankCall
      ld a,e
      pop hl
      cp a,ff
      jr nz,.next
      dec hl
      ldi a,(hl)
      .next
      pop de
      pop bc
      ret

  06/lookupCollectMode_body: |
      ld hl,wNetCollect
      ld e,(hl)
      xor a
      ld (hl),a
      ld a,e
      and a
      ret nz
      ld e,42
      ld a,(de)
      ld b,a
      inc e
      ld a,(de)
      ld c,a
      call lookupCheck
      ld e,ff
      ret nc
      inc hl
      inc hl
      inc hl
      ldd a,(hl)
      ld e,INTERAC_MULTI_BYTE
      ld (de),a
      ld e,(hl)
      ret
